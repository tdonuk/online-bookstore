{"ast":null,"code":"import axios from 'axios';\nimport { BehaviorSubject } from 'rxjs';\nconst URL = \"http://localhost:8765/api/user\";\nconst currentUser = new BehaviorSubject(JSON.parse(localStorage.getItem('currentUser')));\n\nclass UserService {\n  get currentUserValue() {\n    return currentUser.value;\n  }\n\n  get currentUser() {\n    return currentUser.asObservable;\n  }\n\n  test(user) {\n    return axios.get(URL + \"/test\").then(resp => {\n      console.log(resp);\n    });\n  }\n\n  login(user) {\n    const headers = {\n      Authorization: 'Bearer ' + btoa(user.username + \":\" + user.password)\n    };\n    console.log(headers.Authorization);\n    return axios.get(URL + \"/login\", {\n      headers: headers\n    }).then(response => {\n      localStorage.setItem('currentUser', JSON.stringify(response.data));\n      currentUser.next(response.data);\n    });\n  }\n\n  logout() {\n    return axios.post(URL + \"/logout\", {}).then(response => {\n      localStorage.removeItem('currentUser');\n      currentUser.next(null);\n    });\n  }\n\n  register(user) {\n    return axios.post(URL + 'register', JSON.stringify(user)), {\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n      }\n    };\n  }\n\n}\n\nexport default new UserService();","map":{"version":3,"sources":["C:/Users/Taha Donuk/Desktop/Workshop/Software/Online Bookstore/client/src/service/UserService.js"],"names":["axios","BehaviorSubject","URL","currentUser","JSON","parse","localStorage","getItem","UserService","currentUserValue","value","asObservable","test","user","get","then","resp","console","log","login","headers","Authorization","btoa","username","password","response","setItem","stringify","data","next","logout","post","removeItem","register"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,eAAR,QAA8B,MAA9B;AAEA,MAAMC,GAAG,GAAG,gCAAZ;AACA,MAAMC,WAAW,GAAG,IAAIF,eAAJ,CAAoBG,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,CAApB,CAApB;;AAEA,MAAMC,WAAN,CAAkB;AACI,MAAhBC,gBAAgB,GAAG;AACrB,WAAON,WAAW,CAACO,KAAnB;AACD;;AAEc,MAAXP,WAAW,GAAG;AAChB,WAAOA,WAAW,CAACQ,YAAnB;AACD;;AAEDC,EAAAA,IAAI,CAACC,IAAD,EAAO;AACT,WAAOb,KAAK,CAACc,GAAN,CAAUZ,GAAG,GAAG,OAAhB,EAAyBa,IAAzB,CAA8BC,IAAI,IAAI;AAC3CC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACD,KAFM,CAAP;AAGD;;AAEDG,EAAAA,KAAK,CAACN,IAAD,EAAO;AACV,UAAMO,OAAO,GAAG;AACdC,MAAAA,aAAa,EAAE,YAAYC,IAAI,CAACT,IAAI,CAACU,QAAL,GAAgB,GAAhB,GAAsBV,IAAI,CAACW,QAA5B;AADjB,KAAhB;AAGAP,IAAAA,OAAO,CAACC,GAAR,CAAYE,OAAO,CAACC,aAApB;AACA,WAAOrB,KAAK,CAACc,GAAN,CAAUZ,GAAG,GAAG,QAAhB,EAA0B;AAACkB,MAAAA,OAAO,EAAEA;AAAV,KAA1B,EAA8CL,IAA9C,CAAmDU,QAAQ,IAAI;AACpEnB,MAAAA,YAAY,CAACoB,OAAb,CAAqB,aAArB,EAAoCtB,IAAI,CAACuB,SAAL,CAAeF,QAAQ,CAACG,IAAxB,CAApC;AACAzB,MAAAA,WAAW,CAAC0B,IAAZ,CAAiBJ,QAAQ,CAACG,IAA1B;AACD,KAHM,CAAP;AAID;;AAEDE,EAAAA,MAAM,GAAG;AACP,WAAO9B,KAAK,CAAC+B,IAAN,CAAW7B,GAAG,GAAG,SAAjB,EAA4B,EAA5B,EAAgCa,IAAhC,CAAqCU,QAAQ,IAAI;AACtDnB,MAAAA,YAAY,CAAC0B,UAAb,CAAwB,aAAxB;AACA7B,MAAAA,WAAW,CAAC0B,IAAZ,CAAiB,IAAjB;AACD,KAHM,CAAP;AAID;;AAEDI,EAAAA,QAAQ,CAACpB,IAAD,EAAO;AACb,WAAOb,KAAK,CAAC+B,IAAN,CAAW7B,GAAG,GAAG,UAAjB,EAA6BE,IAAI,CAACuB,SAAL,CAAed,IAAf,CAA7B,GAAoD;AAACO,MAAAA,OAAO,EAAE;AAAC,wBAAe;AAAhB;AAAV,KAA3D;AACD;;AAnCe;;AAsClB,eAAe,IAAIZ,WAAJ,EAAf","sourcesContent":["import axios from 'axios'\r\nimport {BehaviorSubject} from 'rxjs';\r\n\r\nconst URL = \"http://localhost:8765/api/user\";\r\nconst currentUser = new BehaviorSubject(JSON.parse(localStorage.getItem('currentUser')));\r\n\r\nclass UserService {\r\n  get currentUserValue() {\r\n    return currentUser.value;\r\n  }\r\n\r\n  get currentUser() {\r\n    return currentUser.asObservable;\r\n  }\r\n\r\n  test(user) {\r\n    return axios.get(URL + \"/test\").then(resp => {\r\n      console.log(resp);\r\n    })\r\n  }\r\n\r\n  login(user) {\r\n    const headers = {\r\n      Authorization: 'Bearer ' + btoa(user.username + \":\" + user.password)\r\n    };\r\n    console.log(headers.Authorization);\r\n    return axios.get(URL + \"/login\", {headers: headers}).then(response => {\r\n      localStorage.setItem('currentUser', JSON.stringify(response.data));\r\n      currentUser.next(response.data);\r\n    });\r\n  }\r\n\r\n  logout() {\r\n    return axios.post(URL + \"/logout\", {}).then(response => {\r\n      localStorage.removeItem('currentUser');\r\n      currentUser.next(null);\r\n    });\r\n  }\r\n\r\n  register(user) {\r\n    return axios.post(URL + 'register', JSON.stringify(user)), {headers: {'Content-Type':'application/json; charset=UTF-8'}};\r\n  }\r\n}\r\n\r\nexport default new UserService();\r\n"]},"metadata":{},"sourceType":"module"}